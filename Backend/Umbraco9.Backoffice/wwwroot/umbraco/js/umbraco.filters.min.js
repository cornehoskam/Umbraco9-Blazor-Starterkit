!function(){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}angular.module("umbraco.filters",[]),angular.module("umbraco.filters").filter("compareArrays",function(){return function inArray(array,compareArray,compareProperty){if(!compareArray||!compareArray.length)return _toConsumableArray(array);var result=[];return array.forEach(function(arrayItem){var exists=!1;compareArray.forEach(function(compareItem){arrayItem[compareProperty]===compareItem[compareProperty]&&(exists=!0)}),exists||result.push(arrayItem)}),result}});var ncNodeNameCache={id:"",keys:{}};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}angular.module("umbraco.filters").filter("ncNodeName",function(editorState,entityResource){function formatLabel(firstNodeName,totalNodes){return totalNodes<=1?firstNodeName:firstNodeName+" (+"+(totalNodes-1)+")"}return function(input){if(""===input||"0"===input.toString())return"";var key="ncNodeName_"+editorState.getCurrent().key;ncNodeNameCache.id!==key&&(ncNodeNameCache.id=key,ncNodeNameCache.keys={});var ids=input.split(","),lookupId=ids[0];if(ncNodeNameCache.keys[lookupId])return formatLabel(ncNodeNameCache.keys[lookupId],ids.length);ncNodeNameCache.keys[lookupId]="Loading...";var type=0===lookupId.indexOf("umb://media/")?"Media":0===lookupId.indexOf("umb://member/")?"Member":"Document";return entityResource.getById(lookupId,type).then(function(ent){ncNodeNameCache.keys[lookupId]=ent.name}),formatLabel(ncNodeNameCache.keys[lookupId],ids.length)}}).filter("ncRichText",function(){return function(input){return $("<div/>").html(input).text()}}),angular.module("umbraco.filters").filter("preserveNewLineInHtml",function(){return function(text){return text?text.replace(/\n/g,"<br />"):""}}),angular.module("umbraco.filters").filter("safe_html",["$sce",function($sce){return function(text){return $sce.trustAsHtml(text)}}]),angular.module("umbraco.filters").filter("simpleMarkdown",function(){return function(text){return text?text.replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/\*(.*)\*/gim,"<i>$1</i>").replace(/!\[(.*?)\]\((.*?)\)/gim,"<img alt='$1' src='$2' />").replace(/\[(.*?)\]\((.*?)\)/gim,"<a href='$2' target='_blank' class='underline'>$1</a>").replace(/\n/g,"<br />").trim():""}}),angular.module("umbraco.filters").filter("timespan",function(){return function(input){var sec_num=parseInt(input,10),hours=Math.floor(sec_num/3600),minutes=Math.floor((sec_num-3600*hours)/60),seconds=sec_num-3600*hours-60*minutes;return hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),seconds<10&&(seconds="0"+seconds),hours+":"+minutes+":"+seconds}}),angular.module("umbraco.filters").filter("truncate",function(){return function(value,wordwise,max,tail){if(!value)return"";if("boolean"!=typeof wordwise&&(!0!==max&&(tail=""),max=wordwise,wordwise=!1),!(max=parseInt(max,10)))return value;if(value.length<=max)return value;if(tail=tail||""===tail?tail:"â€¦",wordwise&&" "===value.substr(max,1)&&max++,value=value.substr(0,max),wordwise){var lastspace=value.lastIndexOf(" ");-1!==lastspace&&(value=value.substr(0,lastspace+1))}return value+tail}}),angular.module("umbraco.filters").filter("umbCmsJoinArray",function(){return function join(array,separator,prop){return"object"===_typeof(array)&&array?(separator=separator||"",(Utilities.isUndefined(prop)?array:array.map(function(item){return item[prop]})).join(separator)):array||""}}),angular.module("umbraco.filters").filter("umbCmsTitleCase",function(){return function(str){return str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}}),function(){angular.module("umbraco.filters").filter("umbWordLimit",function umbWordLimitFilter(){return function(collection,property){if(!Utilities.isString(collection))return collection;if(Utilities.isUndefined(property))return collection;var array=[];return(array=collection.split(" ",property)).length=property,array.join(" ")}})}()}();